/*!
 * Animate Video Player, http://tpkn.me/
 */
function AnimateVideoPlayer(n){function t(n,t,e){n.addEventListener?n.addEventListener(t,e,!1):n.attachEvent("on"+t,function(){return e.call(n,window.event)})}function e(n,t,e){return typeof n===t?n:e}function o(){d.paused&&d.play()}function i(){d.paused||d.pause()}function c(){d.ended||(d.pause(),d.currentTime=0)}function u(){s.visible=!1,p.visible=!0,D.visible=!0,o()}function a(){L.REPLAY(),M.REPLAY();d.ended;d.currentTime=0,d.play()}function E(){d.muted=!0}function r(){d.muted=!1}function l(){d.paused&&!d.ended?o():i(),d.ended&&a()}function f(){d.muted?r():E()}if("object"==typeof n&&n.container&&"function"==typeof n.container.gotoAndStop&&n.videos){var d,A,p,s,D,R,T,v,b=n.container,P=void 0!==n.loop&&n.loop,_=void 0===n.muted||n.muted,m=void 0!==n.autoplay&&n.autoplay,U=n.callbacks||{},N=n.controls||{},y="string"==typeof n.preload&&n.preload.length>0?n.preload:"auto",S={fn:function(n){},visible:!1,gotoAndStop:function(n){}},g={INIT:function(){t(d,"error",g.ERROR),t(d,"loadedmetadata",g.LOADEDMETADATA),t(d,"playing",g.PLAYING),t(d,"progress",g.PROGRESS),t(d,"timeupdate",g.TIMEUPDATE),t(d,"ended",g.ENDED),t(d,"pause",g.PAUSE),t(d,"play",g.PLAY),t(d,"volumechange",g.VOLUMECHANGE)},ERROR:function(n){var t=["MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"][n.target.error.code-1];M.ERROR("Error: "+t)},LOADEDMETADATA:function(n){L.START(),M.META(n)},PLAYING:function(n){L.PLAYING(),M.PLAYING(n)},PROGRESS:function(n){M.READY(n)},TIMEUPDATE:function(n){M.UPDATE(n)},ENDED:function(n){P?(a(),M.REPLAY()):(M.END(n),L.ENDED())},PAUSE:function(n){L.PAUSED(),M.PAUSE(n)},PLAY:function(n){v.visible&&(v.visible=!1),L.PLAYING(),M.PLAY(n)},VOLUMECHANGE:function(n){n.target.muted?(0,L.MUTED(),M.MUTE(n)):(n.target.volume,L.UNMUTED(),M.UNMUTE(n))}},L={INIT:function(){N.play_btn?(t(p=N.play_btn,"click",l),p.visible=!1):p=S,N.sound_btn?(t(D=N.sound_btn,"click",f),D.visible=!1):D=S,N.replay_btn?(t(R=N.replay_btn,"click",a),R.visible=!1):R=S,N.start_btn?(t(s=N.start_btn,"click",u),s.visible=!m):s=S,T=N.preloader_mc?N.preloader_mc:S,v=N.poster_mc?N.poster_mc:S,m&&(T.visible=!0)},START:function(){m&&(p.visible=!0,D.visible=!0),d.autoplay?L.PLAYING():L.PAUSED(),d.muted?L.MUTED():L.UNMUTED(),T.visible=!1},PLAYING:function(){p.gotoAndStop(1)},PAUSED:function(){p.gotoAndStop(0)},MUTED:function(){D.gotoAndStop(1)},UNMUTED:function(){D.gotoAndStop(0)},ENDED:function(){p.visible=!1,D.visible=!1,R.visible=!0},REPLAY:function(){p.visible=!0,D.visible=!0,R.visible=!1}},M={META:e(U.on_meta,"function",S.fn),READY:e(U.on_ready,"function",S.fn),START:e(U.on_start,"function",S.fn),END:e(U.on_end,"function",S.fn),REPLAY:e(U.on_replay,"function",S.fn),PLAYING:e(U.on_playing,"function",S.fn),UPDATE:e(U.on_update,"function",S.fn),PLAY:e(U.on_play,"function",S.fn),PAUSE:e(U.on_pause,"function",S.fn),MUTE:e(U.on_mute,"function",S.fn),UNMUTE:e(U.on_unmute,"function",S.fn),ERROR:e(U.on_error,"function",S.fn)};return d=document.createElement("video"),function(n,t){var e;if("[object Array]"===Object.prototype.toString.call(t))for(var o=0,i=t.length;o<i;o++)(e=document.createElement("source")).src=t[o],n.appendChild(e);else"[object String]"===Object.prototype.toString.call(t)&&((e=document.createElement("source")).src=t,n.appendChild(e))}(d,n.videos),d.muted=_,d.preload=y,t(d,"canplay",function(){m&&o()}),A=new createjs.Bitmap(d),b.addChild(A),g.INIT(),L.INIT(),{video:d,play:o,pause:i,stop:c,restart:a,mute:E,unmute:r,togglePlay:l,toggleMute:f}}}